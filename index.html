<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6 ie9-and-less ie8-and-less ie7-and-less" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 ie9-and-less ie8-and-less ie7-and-less" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 ie9-and-less ie8-and-less" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 ie9-and-less" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>PACE — Automatic page load progress bars</title>

	<link href="/pace/assets/css/flash-white.css" rel="stylesheet" />
	<link href="/pace/assets/css/documentation-home.css" rel="stylesheet" />

	<script type="text/javascript" src="/pace/assets/js/modernizr.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="/pace/assets/js/color.min.js"></script>
	<script src="/pace/assets/js/themes.js"></script>
	<script src="/pace/assets/js/pace.min.js"></script>
</head>
<body>
	<style id="app-colors">
		.section.colored,
		a.download-src-link,
		.button {
			background: #29d;
		}

		a,
		a:hover,
		a:active,
		.header .title .title2:before {
			color: #29d;
		}
	</style>

	<div class="section colored">
		<div class="header">
			<div class="title">
				<h1 class="title1"><span class="char1">p</span><span class="char2">a</span><span class="char3">c</span><span class="char4">e</span></h1>
				<h1 class="title2"><span class="char1">p</span><span class="char2">a</span><span class="char3">c</span><span class="char4">e</span></h1>
			</div>
			<div class="subtitle">
				<h3>Automatic page load progress bar</h3>
			</div>
		</div>
		<div class="down-arrow">⇪</div>
	</div>

	<div class="section">
		<div class="page">
			<h2>What is Pace?</h2>
			<p class="text-left">Include pace.js and a CSS theme of your choice, and you get a beautiful progress indicator for your page load and ajax navigation.</p>
			<p class="text-left">No need to hook into any of your code, progress is detected automatically.</p>
			<br/>
			<h2>Download</h2>
			<p>If you’re a developer, download Pace directly here:</p>
			<p><a class="button main-download-btn" href="https://github.com/CodeByZach/pace/releases/latest">Pace.js</a></p>
			<br/>
			<h2>Themes</h2>
			<p>Download a theme in the color of your choosing</p>
			<label class="color-label" for="color-select">Enter a color:</label>
			<input type="color" value="#2299dd" id="color-select"></input>
			<div class="themes"></div>
			<p class="block">Submit a theme! <a href="https://github.com/CodeByZach/pace/">Fork us on GitHub</a></p>
			<p class="block"><a class="button" href="https://codebyzach.github.io/pace/docs/">Documentation</a></p>
			<br/>
			<br/>
		</div>
	</div>

	<!-- Force 3d acceleration always and forever :) -->
	<div style="-webkit-transform: translateZ(0)"></div>


	<script>
		(function(console) {
			console.save = function(data, filename, mime_type) {
				if (data === undefined || data === null) {
					console.error('console.save: No data');
					return;
				}
				filename  = (filename === undefined || filename === null) ? 'console.txt' : filename;
				mime_type = (mime_type === undefined || mime_type === null) ? 'text/plain' : mime_type;

				let blob = new Blob([data], { type: mime_type });
				let e    = document.createEvent('MouseEvents');
				let a    = document.createElement('a');

				a.download            = filename;
				a.href                = window.URL.createObjectURL(blob);
				a.dataset.downloadurl = [mime_type, a.download, a.href].join(':');
				e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
				a.dispatchEvent(e);
			}
		})(console);


		$(function(){
			if (!Modernizr.inputtypes.color) {
				$('.color-label').show();
			}

			var themes = [
				{
					name: 'minimal',
					title: 'Minimal',
					author: 'adamschwartz'
				},
				{
					name: 'flash',
					title: 'Flash',
					author: 'adamschwartz'
				},
				{
					name: 'barber-shop',
					title: 'Barber Shop',
					author: 'adamschwartz'
				},
				{
					name: 'mac-osx',
					title: 'Mac OSX',
					author: 'adamschwartz'
				},
				{
					name: 'fill-left',
					title: 'Fill Left',
					author: 'adamschwartz'
				},
				{
					name: 'flat-top',
					title: 'Flat Top',
					author: 'adamschwartz'
				},
				{
					name: 'big-counter',
					title: 'Big Counter',
					author: 'adamschwartz'
				},
				{
					name: 'corner-indicator',
					title: 'Corner Indicator',
					author: 'adamschwartz'
				},
				{
					name: 'bounce',
					title: 'Bounce',
					author: 'adamschwartz'
				},
				{
					name: 'loading-bar',
					title: 'Loading Bar',
					author: 'gavJackson'
				},
				{
					name: 'center-circle',
					title: 'Center Circle',
					author: 'adamschwartz'
				},
				{
					name: 'center-atom',
					title: 'Center Atom',
					author: 'kennyglenn'
				},
				{
					name: 'center-radar',
					title: 'Center Radar',
					author: 'kennyglenn'
				},
				{
					name: 'center-simple',
					title: 'Center Simple',
					author: 'dineshgithub'
				}
			];

			var init = function() {
				$.each(themes, function(i, theme){
					$('.themes').append('<div class="theme ' + (i % 2 === 0 ? 'even' : 'odd') + '">'+
						'<h3>' + theme.title + '</h3>' +
						(theme.author ? '<br/><a class="author" href="https://github.com/' + theme.author + '" target="_blank" rel="nofollow">@' + theme.author + '</a></h4>' : '') +
						'<p><a href="#" class="download-link" data-theme="' + theme.name + '">download</a></p>'+
						'<div class="browser"><iframe data-theme="' + theme.name + '"></iframe></div>' +
					'</div>');
				});

				var $color = $('input[type="color"]');

				var cssCache = {};
				var initFrame = function(frame, color){
					if ($color.val() != '#2299dd'){
						color = $color.val();
					}

					var $styleEl = $('<style>')
					$(frame).contents().find('body').append($styleEl);

					var context = {};
					if (color){
						context.color = color;
					}

					var themeName = $(frame).data('theme')
					loadTheme(themeName, function(theme){
						body = compileTheme(theme, context);
						cssCache[themeName] = body;
						$styleEl.html(body);
					});

					$(frame).contents().find('.pace').addClass('pace-active');
				};

				var updateColor = function(color){
					$('.browser iframe').each(function(){
						initFrame(this, color);
					});
				};

				var downloadTheme = function(theme){
					// location.href = 'data:text/css,' + encodeURIComponent(cssCache[theme]);
					console.save(cssCache[theme], theme+'.css', 'text/css');
				};

				var getGeneratedPageURL = function(html) {
					let getBlobURL = (code, type) => {
						let blob = new Blob([code], { type });
						return URL.createObjectURL(blob);
					}

					let source = `
						<html>
							<body>
								${html}
							</body>
						</html>
					`;

					return getBlobURL(source, 'text/html');
				};

				$('.browser iframe').each(function(){
					let current_iframe = this;
					current_iframe.src = getGeneratedPageURL('' +
						'<div class="pace">' +
							'<div class="pace-progress" data-progress="50" data-progress-text="50%" style="-webkit-transform: translate3d(50%, 0px, 0px); -ms-transform: translate3d(50%, 0px, 0px); transform: translate3d(50%, 0px, 0px);">' +
								'<div class="pace-progress-inner"></div>' +
							'</div>' +
							'<div class="pace-activity"></div>' +
						'</div>' +
					'');
					setTimeout(function(){
						initFrame(current_iframe);
					}, 500);
				});

				$color.on('change keyup', function(){
					var color = $(this).val();
					updateColor(color);

					var css = '.section.colored, a.button { background: ' + color + '; } a, a:hover, a:active, .header .title .title2:before { color: ' + color + '; }';
					if ($('html').hasClass('ie8-and-less')) {
						$('#app-colors').get(0).styleSheet.cssText = css;
					} else {
						$('#app-colors').html(css);
					}
				});

				$('a.download-link').click(function(e){
					e.preventDefault();
					var theme = $(this).data('theme');
					downloadTheme(theme);
				});
			};

			var initTimeout = setTimeout(function(){
				$(window).unbind('scroll', scrollOnce);
				init();
			}, 3000);

			var scrollOnce = function() {
				$(window).unbind('scroll', scrollOnce);
				clearTimeout(initTimeout);
				init();
			};

			$(window).bind('scroll', scrollOnce);
		});


		setTimeout(function(){ document.body.className = 'page-loaded' }, 0);
	</script>
</body>
</html>